<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Import &amp; Processing • spiro</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Import &amp; Processing">
<meta property="og:description" content="spiro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spiro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/import_processing.html">Import &amp; Processing</a>
</li>
<li>
  <a href="../articles/summarizing_plotting.html">Summarizing &amp; Plotting</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/smnnlt/spiro">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="import_processing_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Import &amp; Processing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smnnlt/spiro/blob/master/vignettes/import_processing.Rmd"><code>vignettes/import_processing.Rmd</code></a></small>
      <div class="hidden name"><code>import_processing.Rmd</code></div>

    </div>

    
    
<p>Different measuring devices and analysis software lead to opaque results in measuring gas exchange parameters. To make exercise science more transparent and reproducible, the <code>spiro</code> package offers a standardized workflow for data from cardiopulmonary exercise testing.</p>
<p>This vignette provides you information on how the the <code>spiro</code> package imports and processes raw data from metabolic carts.</p>
<div id="spiro-function" class="section level2">
<h2 class="hasAnchor">
<a href="#spiro-function" class="anchor"></a>Import and processing with <code>spiro()</code>
</h2>
<p>To import and process data is quite easy: The <code><a href="../reference/spiro.html">spiro()</a></code> function does all the work for you. You just need to paste the path of a file with raw data from cardiopulmonary exercise testing to the function. This will return a <code>data.frame</code> containing all relevant data for each second of testing, ready for <a href="https://smnnlt.github.io/spiro/articles/summarising_plotting.html">summarizing or plotting</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/smnnlt/spiro">spiro</a></span><span class="op">)</span>

<span class="co"># Get example data</span>
<span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"zan_gxt"</span><span class="op">)</span>

<span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="co">#&gt;    load step time    VO2   VCO2    RR   VT    VE HR PetO2 PetCO2 VO2_rel</span>
<span class="co">#&gt; 1     0    0    1     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 2     0    0    2     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 3     0    0    3     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 4     0    0    4 399.08 323.70 13.94 0.77 10.72 NA    NA     NA    6.05</span>
<span class="co">#&gt; 5     0    0    5 409.83 330.26 14.50 0.74 10.66 NA    NA     NA    6.21</span>
<span class="co">#&gt; 6     0    0    6 420.58 336.82 15.06 0.71 10.60 NA    NA     NA    6.37</span>
<span class="co">#&gt; 7     0    0    7 431.33 343.37 15.63 0.68 10.53 NA    NA     NA    6.54</span>
<span class="co">#&gt; 8     0    0    8 435.30 346.51 16.06 0.69 11.04 NA    NA     NA    6.60</span>
<span class="co">#&gt; 9     0    0    9 437.02 348.52 16.46 0.71 11.74 NA    NA     NA    6.62</span>
<span class="co">#&gt; 10    0    0   10 438.74 350.53 16.85 0.74 12.44 NA    NA     NA    6.65</span>
<span class="co">#&gt;    VCO2_rel RE  RER  CHO   FO</span>
<span class="co">#&gt; 1        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 2        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 3        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 4      4.90 NA 0.81 0.20 0.13</span>
<span class="co">#&gt; 5      5.00 NA 0.81 0.19 0.13</span>
<span class="co">#&gt; 6      5.10 NA 0.80 0.19 0.14</span>
<span class="co">#&gt; 7      5.20 NA 0.80 0.18 0.15</span>
<span class="co">#&gt; 8      5.25 NA 0.80 0.18 0.15</span>
<span class="co">#&gt; 9      5.28 NA 0.80 0.19 0.15</span>
<span class="co">#&gt; 10     5.31 NA 0.80 0.19 0.15</span>
<span class="co">#&gt; ... with 2999 more rows</span></code></pre></div>
<p><code><a href="../reference/spiro.html">spiro()</a></code> will return interpolated data for the following parameters:</p>
<ul>
<li>
<strong>load</strong>: velocity or power, either retrieved from the raw data file or manually supplied by <a href="#protocol-set">setting a protocol</a>
</li>
<li>
<strong>step</strong>: coded variable for the number of the load step in the test protocol</li>
<li>
<strong>time</strong>: time (s)</li>
<li>
<strong>VO2</strong>: oxygen uptake (ml/min)</li>
<li>
<strong>VCO2</strong>: carbon dioxide output (ml/min)</li>
<li>
<strong>RR</strong>: respiratory rate (1/min)</li>
<li>
<strong>VT</strong>: tidal volume (l)</li>
<li>
<strong>VE</strong>: minute ventilation (l/min)</li>
<li>
<strong>HR</strong>: heart rate (bpm), if available</li>
<li>
<strong>PetO2</strong>: end-tidal partial pressure of oxygen (mmHg)</li>
<li>
<strong>PetCO2</strong>: end-tidal partial pressure of carbon dioxide (mmHg)</li>
<li>
<strong>VO2_rel</strong>: relative oxygen uptake (ml/min/kg)</li>
<li>
<strong>VCO2_rel</strong>: relative carbon dioxide output (ml/min/kg)</li>
<li>
<strong>RE</strong>: running economy (ml/kg/km), if applicable</li>
<li>
<strong>RER</strong>: respiratory quotient</li>
<li>
<strong>CHO</strong>: rate of carbohydrate oxidation (g/min)</li>
<li>
<strong>FO</strong>: rate of fat oxidation (g/min)</li>
</ul>
<p>You can control the exercise protocol, the calculation of parameters related to body weight and the adding of heart rate data with the arguments of <code><a href="../reference/spiro.html">spiro()</a></code> or with the helper functions <code>add_protocol</code>, <code><a href="../reference/add_weight.html">add_weight()</a></code> and <code><a href="../reference/add_hr.html">add_hr()</a></code> within a piping syntax.</p>
</div>
<div id="metabolic-carts" class="section level2">
<h2 class="hasAnchor">
<a href="#metabolic-carts" class="anchor"></a>Supported metabolic carts</h2>
<p>The <code>spiro</code> package supports different metabolic carts. The metabolic cart a data file is produced by is usually determined automatically, but can also be set manually in the <code><a href="../reference/spiro.html">spiro()</a></code> function. Currently this package supports the following devices:</p>
<ul>
<li>
<strong>CORTEX</strong> (<code>"cortex"</code>): .xlsx or .xls files in German language</li>
<li>
<strong>COSMED</strong> (<code>"cosmed"</code>): .xlsx or .xls files in English or German language</li>
<li>
<strong>ZAN</strong> (<code>"zan"</code>): .dat files, usually with the name "EXED*" in German language</li>
</ul>
<p>It is highly recommended to import only raw breath-by-breath data to analyze all available data and avoid the duplication of interpolation processes.</p>
<p>To only import the data without further processing (such as interpolation) use the function <code><a href="../reference/spiro_import.html">spiro_import()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spiro_import.html">spiro_import</a></span><span class="op">(</span><span class="va">file</span>, device <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
<span class="co">#&gt;      time VO2 VCO2    RR   VT    VE HR load PetO2 PetCO2</span>
<span class="co">#&gt; 1   3.435 393  320 13.62 0.79 10.76 NA    0    NA     NA</span>
<span class="co">#&gt; 2   7.248 434  345 15.76 0.67 10.51 NA    0    NA     NA</span>
<span class="co">#&gt; 3  10.732 440  352 17.14 0.76 12.96 NA    0    NA     NA</span>
<span class="co">#&gt; 4  13.966 582  451 18.63 0.65 12.13 NA    0    NA     NA</span>
<span class="co">#&gt; 5  17.201 837  677 18.47 1.07 19.71 NA    0    NA     NA</span>
<span class="co">#&gt; 6  20.388 902  753 18.87 1.19 22.42 NA    0    NA     NA</span>
<span class="co">#&gt; 7  24.372 391  338 15.08 1.01 15.23 NA    0    NA     NA</span>
<span class="co">#&gt; 8  27.997 503  428 16.52 0.69 11.45 NA    0    NA     NA</span>
<span class="co">#&gt; 9  32.060 246  214 14.78 0.61  8.97 NA    0    NA     NA</span>
<span class="co">#&gt; 10 34.652 728  605 23.25 0.54 12.46 NA    0    NA     NA</span>
<span class="co">#&gt; ... with 1987 more rows</span></code></pre></div>
<p>Alternatively you can access the raw data after a <code><a href="../reference/spiro.html">spiro()</a></code> call by extracting the <code>"raw"</code> attribute of the result.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">s</span>,<span class="st">"raw"</span><span class="op">)</span></code></pre></div>
</div>
<div id="protocols" class="section level2">
<h2 class="hasAnchor">
<a href="#protocols" class="anchor"></a>Exercise protocols</h2>
<p>To achieve the full functionality of data summary and plotting with the <code>spiro</code> package, an exercise protocol needs to be attached to the data.</p>
<div id="protocol-get" class="section level3">
<h3 class="hasAnchor">
<a href="#protocol-get" class="anchor"></a>Protocol guessing</h3>
<p>By default, <code><a href="../reference/spiro.html">spiro()</a></code> guesses the exercise protocol using <code><a href="../reference/get_protocol.html">get_protocol()</a></code>, looking for velocity or load data in the imported raw data. To return the protocol guess after a <code><a href="../reference/spiro.html">spiro()</a></code> call, access the <code>"protocol"</code> attribute.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">s</span>,<span class="st">"protocol"</span><span class="op">)</span>
<span class="co">#&gt;    duration load          type code</span>
<span class="co">#&gt; 1        60  0.0  pre measures    0</span>
<span class="co">#&gt; 2       300  2.0          load    1</span>
<span class="co">#&gt; 3        30  0.0          rest   -1</span>
<span class="co">#&gt; 4       300  2.4          load    2</span>
<span class="co">#&gt; 5        30  0.0          rest   -1</span>
<span class="co">#&gt; 6       300  2.8          load    3</span>
<span class="co">#&gt; 7        30  0.0          rest   -1</span>
<span class="co">#&gt; 8       300  3.2          load    4</span>
<span class="co">#&gt; 9        30  0.0          rest   -1</span>
<span class="co">#&gt; 10      300  3.6          load    5</span>
<span class="co">#&gt; 11       30  0.0          rest   -1</span>
<span class="co">#&gt; 12      300  4.0          load    6</span>
<span class="co">#&gt; 13       30  0.0          rest   -1</span>
<span class="co">#&gt; 14      300  4.4          load    7</span>
<span class="co">#&gt; 15       30  0.0          rest   -1</span>
<span class="co">#&gt; 16      300  4.8          load    8</span>
<span class="co">#&gt; 17       30  0.0          rest   -1</span>
<span class="co">#&gt; 18      300  5.2          load    9</span>
<span class="co">#&gt; 19       10  0.0 post measures   -2</span></code></pre></div>
</div>
<div id="protocol-set" class="section level3">
<h3 class="hasAnchor">
<a href="#protocol-set" class="anchor"></a>Protocol setting</h3>
<p>In cases where no load data is saved in the metabolic cart’s file or <code><a href="../reference/get_protocol.html">get_protocol()</a></code> turns wrong, a protocol can be manually set.</p>
<p>There are two ways to initially generate a protocol: by providing all load-duration combinations with <code><a href="../reference/set_protocol_manual.html">set_protocol_manual()</a></code> or by using the helper functions within <code><a href="../reference/set_protocol.html">set_protocol()</a></code>. Once a protocol has been set, it can be used as the <code>protocol</code> argument in a <code><a href="../reference/spiro.html">spiro()</a></code> call or attached to a <code>spiro</code> data frame with <code><a href="../reference/add_protocol.html">add_protocol()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># manually setting a test protocol</span>
<span class="va">pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_protocol_manual.html">set_protocol_manual</a></span><span class="op">(</span>
  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">60</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span>,<span class="fl">30</span>,<span class="fl">300</span><span class="op">)</span>,
  load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">3</span>,<span class="fl">0</span>,<span class="fl">3.2</span>,<span class="fl">0</span>,<span class="fl">3.4</span>,<span class="fl">0</span>,<span class="fl">3.6</span>,<span class="fl">0</span>,<span class="fl">3.8</span>,<span class="fl">0</span>,<span class="fl">4</span>,<span class="fl">0</span>,<span class="fl">4.2</span>,<span class="fl">0</span>,<span class="fl">4.4</span>,<span class="fl">0</span>,<span class="fl">4.6</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># attach protocol within spiro call</span>
<span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span>, protocol <span class="op">=</span> <span class="va">pt</span><span class="op">)</span>

<span class="co"># attach protocol with `add_protocol`</span>
<span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="fu"><a href="../reference/add_protocol.html">add_protocol</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">pt</span><span class="op">)</span>
<span class="co">#&gt;    load step time    VO2   VCO2    RR   VT    VE HR PetO2 PetCO2 VO2_rel</span>
<span class="co">#&gt; 1     0    0    1     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 2     0    0    2     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 3     0    0    3     NA     NA    NA   NA    NA NA    NA     NA      NA</span>
<span class="co">#&gt; 4     0    0    4 399.08 323.70 13.94 0.77 10.72 NA    NA     NA    6.05</span>
<span class="co">#&gt; 5     0    0    5 409.83 330.26 14.50 0.74 10.66 NA    NA     NA    6.21</span>
<span class="co">#&gt; 6     0    0    6 420.58 336.82 15.06 0.71 10.60 NA    NA     NA    6.37</span>
<span class="co">#&gt; 7     0    0    7 431.33 343.37 15.63 0.68 10.53 NA    NA     NA    6.54</span>
<span class="co">#&gt; 8     0    0    8 435.30 346.51 16.06 0.69 11.04 NA    NA     NA    6.60</span>
<span class="co">#&gt; 9     0    0    9 437.02 348.52 16.46 0.71 11.74 NA    NA     NA    6.62</span>
<span class="co">#&gt; 10    0    0   10 438.74 350.53 16.85 0.74 12.44 NA    NA     NA    6.65</span>
<span class="co">#&gt;    VCO2_rel RE  RER  CHO   FO</span>
<span class="co">#&gt; 1        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 2        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 3        NA NA   NA   NA   NA</span>
<span class="co">#&gt; 4      4.90 NA 0.81 0.20 0.13</span>
<span class="co">#&gt; 5      5.00 NA 0.81 0.19 0.13</span>
<span class="co">#&gt; 6      5.10 NA 0.80 0.19 0.14</span>
<span class="co">#&gt; 7      5.20 NA 0.80 0.18 0.15</span>
<span class="co">#&gt; 8      5.25 NA 0.80 0.18 0.15</span>
<span class="co">#&gt; 9      5.28 NA 0.80 0.19 0.15</span>
<span class="co">#&gt; 10     5.31 NA 0.80 0.19 0.15</span>
<span class="co">#&gt; ... with 2999 more rows</span></code></pre></div>
<p>With <code><a href="../reference/set_protocol.html">set_protocol()</a></code> a protocol can be defined without specifying every single load step. You can paste the pre-defined segment types <code><a href="../reference/set_protocol.html">pre()</a></code>, <code><a href="../reference/set_protocol.html">wu()</a></code>, <code><a href="../reference/set_protocol.html">const()</a></code>and <code><a href="../reference/set_protocol.html">steps()</a></code> into <code><a href="../reference/set_protocol.html">set_protocol()</a></code> in the desired order. The following graph illustrates an example of this practice:</p>
<p><img src="import_processing_files/figure-html/protocol%20variable-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/set_protocol.html">set_protocol</a></span><span class="op">(</span><span class="fu"><a href="../reference/set_protocol.html">pre</a></span><span class="op">(</span><span class="fl">60</span><span class="op">)</span>, <span class="fu"><a href="../reference/set_protocol.html">wu</a></span><span class="op">(</span><span class="fl">300</span>,<span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="../reference/set_protocol.html">steps</a></span><span class="op">(</span><span class="fl">180</span>,<span class="fl">100</span>,<span class="fl">25</span>,<span class="fl">6</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    duration load</span>
<span class="co">#&gt; 1        60    0</span>
<span class="co">#&gt; 2       300   80</span>
<span class="co">#&gt; 3       180  100</span>
<span class="co">#&gt; 4        30    0</span>
<span class="co">#&gt; 5       180  125</span>
<span class="co">#&gt; 6        30    0</span>
<span class="co">#&gt; 7       180  150</span>
<span class="co">#&gt; 8        30    0</span>
<span class="co">#&gt; 9       180  175</span>
<span class="co">#&gt; 10       30    0</span>
<span class="co">#&gt; 11      180  200</span>
<span class="co">#&gt; 12       30    0</span>
<span class="co">#&gt; 13      180  225</span></code></pre></div>
</div>
</div>
<div id="weight" class="section level2">
<h2 class="hasAnchor">
<a href="#weight" class="anchor"></a>Modify body weight</h2>
<p>The <code>spiro</code> package calculates parameters relative to body weight. Per default <code><a href="../reference/spiro.html">spiro()</a></code> will look for information on body weight in the meta data of the original data file. If for some reason no or the wrong weight is present in the raw data file, <code>weight</code> can be manually given as an argument in <code><a href="../reference/spiro.html">spiro()</a></code> or with <code>add_weight</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set body weight as an argument in `spiro()`</span>
<span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span>, weight <span class="op">=</span> <span class="fl">68.3</span><span class="op">)</span>

<span class="co"># set body weight using `add_weight()`</span>
<span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/add_weight.html">add_weight</a></span><span class="op">(</span><span class="fl">68.3</span><span class="op">)</span></code></pre></div>
</div>
<div id="heart-rate" class="section level2">
<h2 class="hasAnchor">
<a href="#heart-rate" class="anchor"></a>Work with external heart rate data</h2>
<p>Some metabolic carts only offer complicated options for connecting them to heart rate monitors. If heart rate data was recorded by another kind of device (e.g. wrist watch), this data can be added within the <code><a href="../reference/spiro.html">spiro()</a></code> call or by using <code><a href="../reference/add_hr.html">add_hr()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get example data file path</span>
<span class="va">hpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"hr_ramp.tcx"</span><span class="op">)</span>

<span class="co"># add heart rate data within `spiro()`</span>
<span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span>, hr_file <span class="op">=</span> <span class="va">hpath</span>, hr_offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co"># add heart rate data with `add_hr()`</span>
<span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/add_hr.html">add_hr</a></span><span class="op">(</span>hr_file <span class="op">=</span> <span class="va">hpath</span>, hr_offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<p><code><a href="../reference/add_hr.html">add_hr()</a></code> will import the heart rate data from a .tcx file and attach it to the existing data set. You can manually set the starting point of the heart rate recording relative to the start of the gas exchange measures recording with the <code>hr_offset</code> argument.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Simon Nolte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
