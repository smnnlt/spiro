<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Summarising &amp; Plotting • spiro</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Summarising &amp; Plotting">
<meta property="og:description" content="spiro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spiro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/import_processing.html">Import &amp; Processing</a>
</li>
<li>
  <a href="../articles/summarising_plotting.html">Summarising &amp; Plotting</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/smnnlt/spiro">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="summarising_plotting_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Summarising &amp; Plotting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smnnlt/spiro/blob/master/vignettes/summarising_plotting.Rmd"><code>vignettes/summarising_plotting.Rmd</code></a></small>
      <div class="hidden name"><code>summarising_plotting.Rmd</code></div>

    </div>

    
    
<p>Different measuring devices and analysis software lead to opaque results in measuring gas exchange parameters. To make exercise science more transparent and reproducible, the <code>spiro</code> package offers a standardised workflow for data from metabolic carts.</p>
<p>This vignette provides you information on how to summarise and plot data previously imported and processed by <code><a href="../reference/spiro.html">spiro()</a></code>.</p>
<div id="load-the-data" class="section level4">
<h4 class="hasAnchor">
<a href="#load-the-data" class="anchor"></a>Load the data</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/smnnlt/spiro">spiro</a></span><span class="op">)</span>

<span class="co"># import and process example data</span>
<span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"zan_gxt"</span><span class="op">)</span>
<span class="va">gxt_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="va">gxt_data</span>
<span class="co">#&gt;    load step time    VO2   VCO2    RR   VT    VE HR VO2_rel VCO2_rel  RER RE</span>
<span class="co">#&gt; 1     0    0    1     NA     NA    NA   NA    NA NA      NA       NA   NA NA</span>
<span class="co">#&gt; 2     0    0    2     NA     NA    NA   NA    NA NA      NA       NA   NA NA</span>
<span class="co">#&gt; 3     0    0    3     NA     NA    NA   NA    NA NA      NA       NA   NA NA</span>
<span class="co">#&gt; 4     0    0    4 399.08 323.70 13.94 0.77 10.72  0    6.05     4.90 0.81 NA</span>
<span class="co">#&gt; 5     0    0    5 409.83 330.26 14.50 0.74 10.66  0    6.21     5.00 0.81 NA</span>
<span class="co">#&gt; 6     0    0    6 420.58 336.82 15.06 0.71 10.60  0    6.37     5.10 0.80 NA</span>
<span class="co">#&gt; 7     0    0    7 431.33 343.37 15.63 0.68 10.53  0    6.54     5.20 0.80 NA</span>
<span class="co">#&gt; 8     0    0    8 435.30 346.51 16.06 0.69 11.04  0    6.60     5.25 0.80 NA</span>
<span class="co">#&gt; 9     0    0    9 437.02 348.52 16.46 0.71 11.74  0    6.62     5.28 0.80 NA</span>
<span class="co">#&gt; 10    0    0   10 438.74 350.53 16.85 0.74 12.44  0    6.65     5.31 0.80 NA</span>
<span class="co">#&gt;     CHO   FO</span>
<span class="co">#&gt; 1    NA   NA</span>
<span class="co">#&gt; 2    NA   NA</span>
<span class="co">#&gt; 3    NA   NA</span>
<span class="co">#&gt; 4  0.20 0.13</span>
<span class="co">#&gt; 5  0.19 0.13</span>
<span class="co">#&gt; 6  0.19 0.14</span>
<span class="co">#&gt; 7  0.18 0.15</span>
<span class="co">#&gt; 8  0.18 0.15</span>
<span class="co">#&gt; 9  0.19 0.15</span>
<span class="co">#&gt; 10 0.19 0.15</span>
<span class="co">#&gt; ... with 2999 more rows</span></code></pre></div>
</div>
<div id="stepwise-summary-with-spiro_summary" class="section level2">
<h2 class="hasAnchor">
<a href="#stepwise-summary-with-spiro_summary" class="anchor"></a>Stepwise summary with <code>spiro_summary()</code>
</h2>
<p>To analyse gas exchange data, usually mean parameters for each performed load step are warranted. To ensure the presence of a metabolic steady state, the end of each step is used for calculations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spiro_summary.html">spiro_summary</a></span><span class="op">(</span><span class="va">gxt_data</span>, interval <span class="op">=</span> <span class="fl">120</span><span class="op">)</span>
<span class="co">#&gt; for pre-measures, interval was set to length of measures (60 seconds)</span>
<span class="co">#&gt;    step_number load     VE     VO2    VCO2  RER VO2_rel     RE  CHO   FO</span>
<span class="co">#&gt; 1            0  0.0  13.03  500.19  411.74 0.82    7.58     NA 0.27 0.15</span>
<span class="co">#&gt; 2            1  2.0  39.87 1860.92 1585.75 0.85   28.20 234.97 1.27 0.46</span>
<span class="co">#&gt; 3            2  2.4  44.63 2097.82 1805.27 0.86   31.79 220.73 1.51 0.49</span>
<span class="co">#&gt; 4            3  2.8  52.63 2413.01 2122.17 0.88   36.56 217.62 1.95 0.48</span>
<span class="co">#&gt; 5            4  3.2  57.19 2710.68 2319.93 0.86   41.07 213.91 1.89 0.65</span>
<span class="co">#&gt; 6            5  3.6  67.45 3048.75 2684.87 0.88   46.19 213.86 2.47 0.60</span>
<span class="co">#&gt; 7            6  4.0  75.91 3404.02 3026.70 0.89   51.58 214.90 2.90 0.62</span>
<span class="co">#&gt; 8            7  4.4  88.36 3724.37 3383.64 0.91   56.43 213.75 3.50 0.56</span>
<span class="co">#&gt; 9            8  4.8 106.44 4223.82 3993.55 0.95   64.00 222.21 4.68 0.37</span>
<span class="co">#&gt; 10           9  5.2 127.54 4573.91 4488.36 0.98   69.30 222.12 5.82 0.12</span></code></pre></div>
<p>The length of the computational interval (in seconds) can be modified by setting the <code>interval</code> argument. If the interval exceed the length of any step in any case, it will be shortened displaying a note.</p>
</div>
<div id="overall-summary-with-spiro_glance" class="section level2">
<h2 class="hasAnchor">
<a href="#overall-summary-with-spiro_glance" class="anchor"></a>Overall summary with <code>spiro_glance()</code>
</h2>
<p>For some types of exercise tests it may be preferable to get an overall instead of a stepwise summary of parameters. <code><a href="../reference/spiro_glance.html">spiro_glance()</a></code> will usually show the maximal values within the test after applying a smoothing by the use of a rolling average.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spiro_glance.html">spiro_glance</a></span><span class="op">(</span><span class="va">gxt_data</span>, interval <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
<span class="co">#&gt;   VO2peak_abs VO2peak_rel RER_peak</span>
<span class="co">#&gt; 1     4732.28        71.7     1.15</span></code></pre></div>
<p>In the case of graded incremental or ramp tests, the <code>interval</code> argument will set the length over which the rolling average will be computed.</p>
<p>For constant load tests <code><a href="../reference/spiro_glance.html">spiro_glance()</a></code> will behave different, as not the maximal values, but the overall average is usually useful to be calculated. Therefore the mean parameter values for all steps of the constant load will be displayed.</p>
</div>
<div id="plotting-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-the-data" class="anchor"></a>Plotting the data</h2>
<p>To plot exercise test data handled by <code><a href="../reference/spiro.html">spiro()</a></code> it is recommend to use specific visualisation packages such as <code>ggplot2</code> on the data. However, to provide a quick view on the compiled data (e.g. for checking if the import operated correctly) the <code>spiro</code> package offers basic shorthand functions of data visualisation.</p>
<div id="plotting-oxygen-uptake-data" class="section level3">
<h3 class="hasAnchor">
<a href="#plotting-oxygen-uptake-data" class="anchor"></a>Plotting oxygen uptake data</h3>
<p>In many cases, the (relative) oxygen uptake will be the parameter of most interest when analysing spiroergometric data. <code><a href="../reference/spiro_plot.html">spiro_plot_VO2()</a></code> visualises the interpolated oxygen uptake data, it’s rolling average and the underlying protocol load.</p>
<p>The length of the computational interval for the rolling average can be changed by setting the <code>smooth</code> argument. To allow a further check for correct importing, setting the <code>title</code> argument to <code>TRUE</code> will create a plot title with the participant’s name and the test type.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spiro_plot.html">spiro_plot_VO2</a></span><span class="op">(</span><span class="va">gxt_data</span>, 
               smooth <span class="op">=</span> <span class="fl">15</span>,
               title <span class="op">=</span> <span class="cn">FALSE</span>
               <span class="op">)</span></code></pre></div>
<p><img src="summarising_plotting_files/figure-html/spiro_plot_VO2-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="plotting-heart-rate-data" class="section level3">
<h3 class="hasAnchor">
<a href="#plotting-heart-rate-data" class="anchor"></a>Plotting heart rate data</h3>
<p>To verify the presence of correct heart rate data, <code><a href="../reference/spiro_plot.html">spiro_plot_HR()</a></code> provides an easy option of visualising the data together with the protocol load data.</p>
<p>To allow a further check for correct importing, setting the <code>title</code> argument to <code>TRUE</code> will create a plot title with the participant’s name and the test type.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load example data</span>
<span class="va">data_with_hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spiro.html">spiro</a></span><span class="op">(</span><span class="fu"><a href="../reference/spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"zan_ramp"</span><span class="op">)</span>, 
                      hr_file <span class="op">=</span> <span class="fu"><a href="../reference/spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"hr_ramp.tcx"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/spiro_plot.html">spiro_plot_HR</a></span><span class="op">(</span><span class="va">data_with_hr</span>, 
              title <span class="op">=</span> <span class="cn">FALSE</span>
              <span class="op">)</span></code></pre></div>
<p><img src="summarising_plotting_files/figure-html/spiro_plot_HR-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Simon Nolte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
